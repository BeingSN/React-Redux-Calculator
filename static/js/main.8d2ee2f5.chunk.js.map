{"version":3,"sources":["redux/calculationReducer.js","redux/store.js","components/LayoutIos/LayoutIos.jsx","components/CalcButtons/CalcButtons.jsx","containers/Calculator/Calculator.jsx","index.js","redux/CalcTypes.js"],"names":["handlers","VALUE_CHANGE","state","payload","value","isNewCalc","result","isInProcess","isDecimal","length","valueBadLength","CALC_ACTIONS","errorMes","lastEl","includes","resultCopy","substring","DECIMAL","IN_PERCENT","POS_NEG","negative","startsWith","slice","CLEAR","RESULT","validGetResult","eval","toString","infinityResult","isBadLength","initialState","calculationReducer","action","type","handle","DEFAULT","store","createStore","LayoutIos","children","className","CalcButtons","btns","map","handler","cls","data-action","data-value","onClick","Calculator","useSelector","dispatch","useDispatch","onCalcActions","e","target","dataset","onValueChange","resultCls","push","join","ReactDOM","render","document","getElementById"],"mappings":"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AASS,EACTR,IAAK,wBACLzC,MAAO,OACP4B,OAAQ,KACT,CACCY,QAASa,EACTrD,MAAO,IACPyC,IAAK,yBAEL,CACID,QAASa,EACTrD,MAAO,IACPyC,IAAK,yBAET,CACID,QAASa,EACTrD,MAAO,IACPyC,IAAK,yBAET,CACID,QAASS,EACTjD,MAAO,OACP4B,OAAQ,IACRa,IAAK,2BAET,CACID,QAASa,EACTrD,MAAO,IACPyC,IAAK,yBAET,CACID,QAASa,EACTrD,MAAO,IACPyC,IAAK,yBAET,CACID,QAASa,EACTrD,MAAO,IACPyC,IAAK,yBAET,CACID,QAASS,EACTjD,MAAO,IACP4B,OAAQ,IACRa,IAAK,2BAET,CACID,QAASa,EACTrD,MAAO,IACPyC,IAAK,yBAET,CACID,QAASa,EACTrD,MAAO,IACPyC,IAAK,yBAET,CACID,QAASa,EACTrD,MAAO,IACPyC,IAAK,yBAET,CACID,QAASS,EACTjD,MAAO,IACP4B,OAAQ,IACRa,IAAK,2BAET,CACID,QAASa,EACTrD,MAAO,IACPyC,IAAK,gDAET,CACID,QA7FU,kBAAMO,EAAS,CAAClB,KAAMhB,OA8FhCb,MAAO,IACPyC,IAAK,yBAET,CACID,QArGS,kBAAMO,EAAS,CAAClB,KAAMT,OAsG/BpB,MAAO,IACPyC,IAAK,4BAEb,OAAO,cAAC,EAAD,UACH,sBAAKL,UAAU,aAAf,UACI,mBAAGA,UAAWkB,EAAUE,KAAK,KAA7B,SACKxD,IAEL,cAAC,EAAD,CAAasC,KAAMA,UChI/BmB,IAASC,OACL,mCACI,cAAC,IAAD,CAAU1B,MAAOA,EAAjB,SACI,cAAC,EAAD,QAGR2B,SAASC,eAAe,U,+BCb5B,8OAAO,IAAM/D,EAAe,eACfsB,EAAQ,QACRC,EAAS,SACTN,EAAa,aACbC,EAAU,oBACVR,EAAe,qBACfM,EAAU,kB","file":"static/js/main.8d2ee2f5.chunk.js","sourcesContent":["import { CLEAR, IN_PERCENT, VALUE_CHANGE, POS_NEG, RESULT, CALC_ACTIONS, DECIMAL } from \"./CalcTypes\";\n\nconst handlers = {\n    [VALUE_CHANGE]: (state, { payload }) => {\n        const inValidChange = +payload === 0 && +state.value === 0\n        if (inValidChange) return state\n        if (state.isNewCalc) {\n            return { ...state, value: payload, result: payload, isNewCalc: false, isInProcess: false, isDecimal: false }\n        }\n        if (state.isInProcess) {\n            return { ...state, value: payload, result: state.result + payload, isInProcess: false, isDecimal: false }\n        }\n        const isBadLength = state.value.length >= state.valueBadLength\n        if (isBadLength) return state\n        return { ...state, value: state.value + payload, result: state.result + payload, isDecimal: false }\n    },\n    [CALC_ACTIONS]: (state, { payload }) => {\n        if (state.value === state.errorMes || state.isDecimal) return state\n        const calcActions = \"*/+-\"\n        const lastEl = state.result[state.result.length - 1]\n        const validCalc = !calcActions.includes(lastEl)\n        if (validCalc) {\n            return { ...state, result: state.result + payload, isNewCalc: false, isInProcess: true }\n        }\n        const isActionReplace = payload !== lastEl\n        if (isActionReplace) {\n            let resultCopy = state.result\n            resultCopy = resultCopy.substring(0, resultCopy.length - 1) + payload\n            return { ...state, result: resultCopy }\n        }\n        return state\n    },\n    [DECIMAL]: (state) => {\n        const invalidDecimal = state.value.includes(\".\") || state.isDecimal\n        if (invalidDecimal) return state\n        if (state.isNewCalc) {\n            return { ...state, value: \".\", result: \".\", isNewCalc: false, isInProcess: false, isDecimal: true }\n        }\n        if (state.isInProcess) {\n            return { ...state, value: \".\", result: state.result + \".\", isInProcess: false, isDecimal: true }\n        }\n        return { ...state, value: state.value + \".\", result: state.result + \".\", isDecimal: true }\n    },\n    [IN_PERCENT]: (state) => {\n        const inValidPercent = state.isDecimal || state.value === state.errorMes || state.isInProcess\n        if (inValidPercent) return state\n        return {\n            ...state,\n            value: (+state.value / 100),\n            result: (state.result) + \"/100\",\n            isNewCalc: true\n        }\n    },\n    [POS_NEG]: (state) => {\n        if (state.value === state.errorMes || state.isDecimal) return state\n        const negative = \"-\"\n        const isNegative = state.value.startsWith(negative)\n        if (isNegative) {\n            if (state.result.startsWith(negative)) {\n                return {\n                    ...state,\n                    value: state.value.slice(1),\n                    result: state.result.slice(1)\n                }\n            }\n            return { ...state, value: state.value.slice(1) }\n\n        } else {\n            if (state.result.startsWith(negative)) {\n                return { ...state, value: negative + state.value }\n            }\n            return { ...state, value: negative + state.value, result: negative + state.result }\n        }\n    },\n    [CLEAR]: (state) => ({ ...state, value: \"0\", result: \"0\", isInProcess: true, isNewCalc: true }),\n    [RESULT]: (state) => {\n        const validGetResult = !state.isInProcess && state.result.length && !state.isDecimal\n        if (validGetResult) {\n            // eslint-disable-next-line no-eval\n            let result = eval(state.result).toString()\n            const infinityResult = result === \"Infinity\"\n            if (infinityResult) {\n                return { ...state, value: state.errorMes, result: \"\", isNewCalc: true, isInProcess: true }\n            }\n            const isBadLength = result.length >= state.valueBadLength\n            result = isBadLength ? result.slice(0, state.valueBadLength) : result\n            return { ...state, value: result, result: result, isNewCalc: true }\n        }\n        return state\n    },\n    DEFAULT: state => state,\n}\nconst initialState = {\n    value: \"0\",\n    result: \"0\",\n    valueBadLength: 9,\n    isNewCalc: true,\n    isInProcess: true,\n    errorMes: \"ERROR\",\n    isDecimal: false\n}\nconst calculationReducer = (state = initialState, action) => {\n    const { type } = action\n    const handle = handlers[type] || handlers.DEFAULT\n    return handle(state, action)\n}\nexport default calculationReducer","import {createStore} from \"redux\";\nimport calculationReducer from \"./calculationReducer\";\n\nexport const store = createStore(calculationReducer)","import React from \"react\"\nimport \"./LayoutIos.css\"\n\nconst LayoutIos = ({children}) => (\n    <div className=\"device device-iphone-x\">\n        <div className=\"device-frame\">\n            <div className=\"device-content\">{children}</div>\n        </div>\n        <div className=\"device-stripe\"></div>\n        <div className=\"device-header\">\n            <div className=\"device-sensors\"></div>\n        </div>\n        <div className=\"device-btns\"></div>\n        <div className=\"device-power\"></div>\n    </div>\n)\nexport default LayoutIos","import React from \"react\"\n\nconst CalcButtons = ({ btns }) => (\n    <div className=\"Calculator__btns\">\n        {btns.map(({ handler, value, cls, action }) => <button data-action={action}\n            key={value}\n            data-value={value}\n            onClick={handler}\n            className={`Calculator__btn ${cls}`}>\n            {value}\n        </button>)}\n    </div>\n)\nexport default CalcButtons","import React from \"react\"\nimport LayoutIos from \"../../components/LayoutIos/LayoutIos\";\nimport \"./Calculator.css\"\nimport {useSelector, useDispatch} from \"react-redux\";\nimport {CALC_ACTIONS, CLEAR, IN_PERCENT, VALUE_CHANGE, POS_NEG, RESULT, DECIMAL} from \"../../redux/CalcTypes\";\nimport CalcButtons from \"../../components/CalcButtons/CalcButtons\";\n\nconst Calculator = () => {\n    const value = useSelector(state => state.value)\n    const dispatch = useDispatch()\n    const onCalcActions = (e) => {\n        const {action} = e.target.dataset\n        dispatch({\n            type: CALC_ACTIONS,\n            payload: action\n        })\n    }\n    const onValueChange = (e) => {\n        const {value} = e.target.dataset\n        dispatch({\n            type: VALUE_CHANGE,\n            payload: value\n        })\n    }\n    const onClear = () => dispatch({type: CLEAR})\n    const onResult = () => dispatch({type: RESULT})\n    const onPercent = () => dispatch({type: IN_PERCENT})\n    const onPositiveNegative = () => dispatch({type: POS_NEG})\n    const onDecimal = () => dispatch({type: DECIMAL})\n    const resultCls = [\"Calculator__result\"]\n    if (value.length > 6 && value.length <= 8) {\n        resultCls.push(\"Calculator__result--md\")\n    } else if (value.length > 8) {\n        resultCls.push(\"Calculator__result--sm\")\n    }\n    const btns = [{\n        handler: onClear,\n        cls: \"Calculator__btn--gray\",\n        value: \"C\",\n    }, {\n        handler: onPositiveNegative,\n        cls: \"Calculator__btn--gray\",\n        value: \"±\"\n    }, {\n        handler: onPercent,\n        cls: \"Calculator__btn--gray\",\n        value: \"%\",\n    }, {\n        handler: onCalcActions,\n        cls: \"Calculator__btn--gray\",\n        value: \"÷\",\n        action: \"/\"\n    }, {\n        handler: onValueChange,\n        value: \"7\",\n        cls: \"Calculator__btn--dark\"\n    },\n        {\n            handler: onValueChange,\n            value: \"8\",\n            cls: \"Calculator__btn--dark\"\n        },\n        {\n            handler: onValueChange,\n            value: \"9\",\n            cls: \"Calculator__btn--dark\"\n        },\n        {\n            handler: onCalcActions,\n            value: \"×\",\n            action: \"*\",\n            cls: \"Calculator__btn--orange\",\n        },\n        {\n            handler: onValueChange,\n            value: \"4\",\n            cls: \"Calculator__btn--dark\"\n        },\n        {\n            handler: onValueChange,\n            value: \"5\",\n            cls: \"Calculator__btn--dark\"\n        },\n        {\n            handler: onValueChange,\n            value: \"6\",\n            cls: \"Calculator__btn--dark\"\n        },\n        {\n            handler: onCalcActions,\n            value: \"-\",\n            action: \"-\",\n            cls: \"Calculator__btn--orange\",\n        },\n        {\n            handler: onValueChange,\n            value: \"1\",\n            cls: \"Calculator__btn--dark\"\n        },\n        {\n            handler: onValueChange,\n            value: \"2\",\n            cls: \"Calculator__btn--dark\"\n        },\n        {\n            handler: onValueChange,\n            value: \"3\",\n            cls: \"Calculator__btn--dark\"\n        },\n        {\n            handler: onCalcActions,\n            value: \"+\",\n            action: \"+\",\n            cls: \"Calculator__btn--orange\",\n        },\n        {\n            handler: onValueChange,\n            value: \"0\",\n            cls: \"Calculator__btn--dark Calculator__btn--large\"\n        },\n        {\n            handler: onDecimal,\n            value: \",\",\n            cls: \"Calculator__btn--dark\"\n        },\n        {\n            handler: onResult,\n            value: \"=\",\n            cls: \"Calculator__btn--orange\"\n        }]\n    return <LayoutIos>\n        <div className=\"Calculator\">\n            <p className={resultCls.join(\" \")}>\n                {value}\n            </p>\n            <CalcButtons btns={btns}/>\n        </div>\n    </LayoutIos>\n}\nexport default Calculator","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport { Provider } from \"react-redux\"\nimport { store } from \"./redux/store\";\nimport Calculator from \"./containers/Calculator/Calculator\";\n\nReactDOM.render(\n    <>\n        <Provider store={store}>\n            <Calculator />\n        </Provider>\n    </>,\n    document.getElementById('root')\n);\n\n","export const VALUE_CHANGE = \"VALUE_CHANGE\"\nexport const CLEAR = \"CLEAR\"\nexport const RESULT = \"RESULT\"\nexport const IN_PERCENT = \"IN_PERCENT\"\nexport const POS_NEG = \"POSITIVE_NEGATIVE\"\nexport const CALC_ACTIONS = \"CALCULATOR_ACTIONS\"\nexport const DECIMAL = \"VALUE_DECIMAL\""],"sourceRoot":""}